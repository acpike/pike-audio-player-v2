/* DESIGN SYSTEM - Master Plan Compliant */

:root {
  /* Primary Color Palette */
  --primary-blue: rgba(96, 165, 250, 1);
  --primary-blue-alpha: rgba(96, 165, 250, 0.8);
  --primary-blue-10: rgba(96, 165, 250, 0.1);
  --primary-blue-15: rgba(96, 165, 250, 0.15);
  --primary-blue-20: rgba(96, 165, 250, 0.2);
  --primary-blue-40: rgba(96, 165, 250, 0.4);
  --primary-blue-90: rgba(96, 165, 250, 0.9);
  --glass-bg: rgba(255, 255, 255, 0.05);
  --glass-border: rgba(255, 255, 255, 0.5);
  --dark-overlay: rgba(0, 0, 0, 0.6);
  --text-primary: white;
  --text-secondary: rgba(255, 255, 255, 0.8);
  
  /* Space Black Foundation Variables */
  --true-black: #000000;
  --deep-charcoal: #0a0a0a;
  --dark-gray: #141414;
  --depth-overlay-1: rgba(15, 15, 15, 0.8);
  --depth-overlay-2: rgba(25, 25, 25, 0.6);
  --depth-overlay-3: rgba(20, 20, 20, 0.7);
  
  /* Enhanced Glass Morphism Variables */
  --glass-space-base: rgba(20, 20, 20, 0.8);
  --glass-white-high: rgba(255, 255, 255, 0.06);
  --glass-white-mid: rgba(255, 255, 255, 0.02);
  --glass-white-low: rgba(255, 255, 255, 0.01);
  --glass-border-space: rgba(255, 255, 255, 0.08);
  
  /* Dynamic Glow System */
  --current-glow-color: rgba(96, 165, 250, 0.4);
  
  /* Pre-initialized glow RGB components - prevents blue fallback flashing */
  --glow-r: 255; /* Neutral white until custom color extracted */
  --glow-g: 255; /* Neutral white until custom color extracted */
  --glow-b: 255; /* Neutral white until custom color extracted */
  
  /* iOS Safe Areas for iPhone X+ with notches/Dynamic Island */
  --safe-area-top: env(safe-area-inset-top, 0px);
  --safe-area-bottom: env(safe-area-inset-bottom, 0px);
  --safe-area-left: env(safe-area-inset-left, 0px);
  --safe-area-right: env(safe-area-inset-right, 0px);
  
  /* Mask Effects */
  --mask-gradient-standard: linear-gradient(to bottom,
    transparent 0px,
    rgba(0, 0, 0, 0.3) var(--mask-fade-distance),
    black var(--mask-solid-distance),
    black calc(100% - var(--mask-solid-distance)),
    rgba(0, 0, 0, 0.3) calc(100% - var(--mask-fade-distance)),
    transparent 100%
  );
  --mask-gradient-portrait: linear-gradient(to bottom,
    black 0px,
    black 20px,
    black calc(100% - var(--mask-solid-distance)),
    rgba(0, 0, 0, 0.3) calc(100% - var(--mask-fade-distance)),
    transparent 100%
  );
  
  /* Play Button System */
  --play-button-size: 180px;
  --play-icon-size: 100px;
  --loading-spinner-size: 60px;
  --play-button-scale-hover: 1.05;
  --play-button-scale-active: 0.95;
  
  /* Audio Player System */
  --audio-player-gap: 25px;
  --cover-size-portrait: 90vw;
  --cover-max-size: 350px;
  --cover-margin-bottom: 25px;
  
  /* Landscape Layout System - Final proportions from compiled version */
  --landscape-audio-width: 40%; /* Proper baseline proportion */
  --landscape-tracklist-width: 58%; /* Balanced track list width */
  --landscape-gap: 0.5%; /* Minimal gap maintained */
  --cover-size-landscape: 280px;  /* Fixed landscape cover size */
  
  /* Progress Bar System */
  --progress-bottom: 8px;
  --progress-horizontal: 20px;
  --progress-spacing: 8px;
  --progress-z-index: 5;
  --progress-height: 10px;
  --progress-border-radius: 5px;
  
  /* Button Positioning System */
  --button-center-vertical: 45%;
  --button-center-horizontal: 50%;
  --button-offset-x: -50%;
  --button-offset-y: -50%;
  --button-z-index: 10;
  --button-container-bottom-offset: calc(var(--progress-bottom) + var(--progress-height) + var(--progress-spacing));

  /* Smart Lip System */
  --smart-lip-height: var(--spacing-lg);
  --smart-lip-z-index: 15;

  /* Border Radius System */
  --radius-xs: 3px;   /* Small elements, progress buffering */
  --radius-sm: 5px;   /* Progress bar */
  --radius-md: 8px;   /* Track thumbnails, debug panel */
  --radius-lg: 12px;  /* Track items, buttons */
  --radius-xl: 16px;  /* Preview buttons */
  --radius-2xl: 20px; /* Cover art */
  --radius-3xl: 24px; /* Main container */
  --radius-4xl: 30px; /* TagsToggle mobile */
  --radius-5xl: 32px; /* TagsToggle default */
  --radius-full: 50%; /* Circular elements */
  
  /* Typography Scale System */
  --font-size-2xs: 7px;   /* TagsToggle mobile text */
  --font-size-xxs: 11px;  /* Preview button mini text */
  --font-size-xs: 8px;    /* TagsToggle small text */
  --font-size-sm: 11px;   /* Status text, time display */
  --font-size-base: 12px; /* Preview buttons, debug panel */
  --font-size-md: 13px;   /* Track tags, track duration landscape */
  --font-size-lg: 14px;   /* Description text, track duration */
  --font-size-landscape: 15px; /* AudioPlayer landscape adjustments */
  --font-size-xl: 16px;   /* Track list title mobile, description */
  --font-size-2xl: 17px;  /* Track titles */
  --font-size-3xl: 18px;  /* Track list title */
  --font-size-4xl: 20px;  /* Track title mobile small */
  --font-size-5xl: 24px;  /* Track title mobile */
  --font-size-6xl: 32px;  /* Main track title */

  /* V7 Time Display */
  --time-font-size: var(--font-size-md);
  --time-color: white;
  --time-letter-spacing: 0.5px;
  --time-blur: 3px;
  
  /* V7 Play Button */
  --play-button-scale-landscape: 0.45;
  --play-button-scale-mobile: 0.45;
  --play-button-scale-ipad: 0.71;
  
  /* V7 Responsive Breakpoints */
  --mobile-max: 768px;
  --iphone-se-max: 568px;
  --ipad-landscape-min: 1000px;
  --ipad-landscape-max: 900px;
  
  /* V7 Animation Timing */
  --transition-smooth: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  --transition-quick: 0.2s ease;
  --transition-linear: 0.1s linear;
  
  /* V8 Layout Variables */
  --spacing-xxs: 2px;
  --spacing-xs: 5px;
  --spacing-sm: 12px;
  --spacing-md: 15px;
  --spacing-lg: 20px;
  --spacing-xl: 25px;
  --spacing-xxl: 35px;
  --portrait-header-height: 43px;
  --container-padding-sm: 15px;
  --container-padding-md: 20px;
  --container-padding-lg: 35px;
  --track-list-max-height: 76.5vh;
  --track-list-min-width: 300px;
  --track-list-gap: 15px;
  --track-list-header-spacing: 8px;
  --track-item-thumbnail-size: 60px;
  --track-item-thumbnail-size-landscape: 55px;
  --track-item-thumbnail-size-mobile: 50px;
  --mask-fade-distance: 8px;
  --mask-solid-distance: 25px;
  
  /* Blur Effects */
  --blur-heavy: blur(24px);
  --blur-medium: blur(12px);
  --blur-light: blur(8px);
  --blur-minimal: blur(5px);
  --blur-extra-light: blur(3px);
  
  /* Border Widths */
  --border-width-sm: 1px;
  --border-width-md: 2px;
  --border-width-lg: 3px;
  --border-width-fine: 1.5px;
  
  /* Shadow Distances */
  --shadow-offset-sm: 2px;
  --shadow-offset-md: 8px;
  --shadow-offset-lg: 32px;
  --shadow-offset-xs: 1px;
  --shadow-offset-xl: 16px;
  --shadow-offset-xxl: 25px;
  
  /* Position Offsets */
  --offset-negative-xs: -1px;
  --offset-negative-sm: -2px;
  --offset-negative-md: -4px;
  --offset-negative-lg: -8px;
  
  /* Transition Variants */
  --transition-medium: 0.25s ease;
  --transition-slow: 0.35s ease;
  
  /* Preview Button System */
  --preview-button-height-mini: 28px;
  --preview-button-min-width-mini: 45px;
  --preview-button-padding-mini: var(--spacing-xs) var(--spacing-sm);
  
  /* V7 Glass Morphism */
  --backdrop-blur: blur(10px);
  --backdrop-blur-light: blur(5px);
  --backdrop-blur-heavy: blur(15px);
}

/* V7 Global Styles - Converted from lines 41-101 */

/* V7 Performance optimizations - lines 50-70 */
* {
  box-sizing: border-box;
  /* Prevent text selection during animations */
  -webkit-tap-highlight-color: transparent;
}

/* V7 Force GPU acceleration on animated elements - lines 57-70 */
.cover,
.play-button,
.tracklist li,
.track-thumbnail,
.button-container {
  will-change: transform;
  -webkit-transform: translateZ(0);
  transform: translateZ(0);
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
  -webkit-perspective: 1000px;
  perspective: 1000px;
}

/* V7 iframe optimization - Enhanced for iOS Safari viewport fixes and PWA support */
html, body {
  margin: 0 !important;
  padding: 0 !important;
  width: 100% !important;
  height: 100% !important; /* Fallback for older browsers */
  overflow-x: hidden !important;
  overflow-y: hidden !important;
  background-color: transparent !important; /* Let SpaceBackground show through */
  box-sizing: border-box !important;
}

/* iOS Safari specific height fix with PWA support */
@supports (-webkit-appearance: none) {
  html, body {
    height: -webkit-fill-available !important; /* iOS Safari specific */
  }
}

/* Modern dynamic viewport height for supporting browsers with PWA support */
@supports (height: 100dvh) {
  html, body {
    height: 100dvh !important; /* Modern dynamic viewport height */
  }
}

#root {
  width: 100vw !important;
  height: 100vh !important; /* Fallback for older browsers */
  margin: 0 !important;
  padding: 0 !important;
  overflow: hidden !important;
  /* Root container inherits safe area handling from body */
  box-sizing: border-box !important;
  background-color: transparent !important; /* Let SpaceBackground show through */
}

/* iOS Safari specific height fix for root */
@supports (-webkit-appearance: none) {
  #root {
    height: -webkit-fill-available !important; /* iOS Safari specific */
  }
}

/* Modern dynamic viewport height for root */
@supports (height: 100dvh) {
  #root {
    height: 100dvh !important; /* Modern dynamic viewport height */
  }
}

/* V7 Body styles - lines 72-85 */
body {
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
  color: white;
  background: transparent;
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 20px;
  padding-top: max(20px, env(safe-area-inset-top));
  padding-bottom: max(20px, env(safe-area-inset-bottom));
  padding-left: max(20px, env(safe-area-inset-left));
  padding-right: max(20px, env(safe-area-inset-right));
}

/* V7 Glass Morphism Base - Moved to ResponsiveLayout.module.css */

/* V7 Device-specific classes - From device detection logic */
.touch-device {
  /* Touch device optimizations */
}

.low-performance {
  /* Low-end device optimizations */
}

/* V7 Landscape mode foundation - From lines 2801-2817 */
.landscape-mode {
  /* CSS-only landscape mode - no DOM manipulation */
}

/* Mobile body overrides - from compiled CSS */
@media (max-width: 768px) and (max-height: 1024px) {
  body {
    padding: 0 !important;
    display: block !important;
  }
}

/* iPad portrait specific body layout fixes - override centering */
@media (min-width: 768px) and (max-width: 1024px) and (orientation: portrait) {
  body {
    display: block !important; /* Override flex centering */
    align-items: stretch !important; /* Remove centering alignment */
    justify-content: stretch !important; /* Remove centering justification */
    padding: 0 !important; /* Remove centering padding */
    /* Add proper safe area padding for iPad */
    padding-top: max(10px, env(safe-area-inset-top)) !important;
    padding-bottom: max(10px, env(safe-area-inset-bottom)) !important;
    padding-left: max(10px, env(safe-area-inset-left)) !important;
    padding-right: max(10px, env(safe-area-inset-right)) !important;
  }
}

/* Orientation change handling - ensure layout persists through orientation changes */
@media (min-width: 768px) and (max-width: 1024px) {
  body {
    /* Prevent layout jumps during orientation changes */
    transition: none !important; /* Disable transitions during orientation change */
  }
  
  /* Ensure proper layout reset after orientation change */
  #root {
    width: 100vw !important;
    /* Progressive height with orientation change support */
    height: 100vh !important; /* Fallback */
    transition: none !important; /* Disable transitions during orientation change */
  }
}

/* iOS Safari specific orientation change fixes */
@supports (-webkit-appearance: none) {
  @media (min-width: 768px) and (max-width: 1024px) {
    #root {
      height: -webkit-fill-available !important;
    }
  }
}

/* Modern dynamic viewport for orientation changes */
@supports (height: 100dvh) {
  @media (min-width: 768px) and (max-width: 1024px) {
    #root {
      height: 100dvh !important;
    }
  }
}

/* V7 Utility Classes - Design System */
.glass-morphism {
  background: var(--glass-bg);
  border: 1px solid var(--glass-border);
  backdrop-filter: var(--backdrop-blur);
}

.smooth-transition {
  transition: all var(--transition-smooth);
}

.gpu-optimized {
  will-change: transform;
  -webkit-transform: translateZ(0);
  transform: translateZ(0);
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
}

